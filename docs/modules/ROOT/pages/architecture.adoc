//
// Copyright 2025 The Apache Software Foundation
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

// Cross-repository references - local default, GitHub override
:mail-mcp-root: ../../mail-mcp
ifdef::env-github[]
:mail-mcp-root: https://github.com/support-and-care-labs/mail-mcp/blob/main
endif::[]

= System Architecture
ifndef::env-site[:toc:]
:toclevels: 3
:imagesdir: diagrams

== Overview

[NOTE]
====
This documentation uses *Claude Code* as the example MCP client.
However, the architecture is client-agnostic.
Any MCP-compatible LLM client or CLI tool can replace Claude Code in this setup.
====

This document describes the architecture and deployment of the Maven MCP ecosystem.
The system consists of multiple MCP servers that provide LLM clients access to various data sources relevant to Maven development.

== Deployment Diagram

image::deployment.drawio.svg[Maven MCP Deployment Architecture,800]

The diagram shows the typical deployment scenario with all MCPs configured.

== Components

=== Local Components

These components run on your local machine:

MCP Client (e.g., Claude Code)::
The MCP client that connects to all configured MCP servers via HTTP/SSE.
Provides the user interface for interacting with the MCPs.

mail-mcp::
Locally deployed MCP server providing access to Maven mailing list archives.
Clients access mail-mcp only via MCP protocol.
See xref:mail-mcp::index.adoc[mail-mcp documentation].

Atlassian MCP::
Locally deployed MCP server (runs via Docker).
Provides access to Apache Jira and Confluence instances.
See xref:components:atlassian-mcps.adoc[Atlassian MCPs] for available options.
Communicates with Atlassian API via REST.

GitHub MCP::
Locally deployed MCP server (runs via `npx`).
Provides access to GitHub repositories, issues, and pull requests.
See xref:components:github-mcp.adoc[GitHub MCP documentation].
Communicates with GitHub API via REST.

Maven Tools MCP::
Locally deployed MCP server (runs via Docker).
Provides Maven Central dependency intelligence (version lookups, health analysis).
See xref:components:maven-tools-mcp.adoc[Maven Tools MCP documentation].
Communicates with Maven Central repository directly.

=== Remote Components

These components are hosted externally:

GitHub API::
REST API at `api.github.com`.

Apache Jira::
REST API at `issues.apache.org/jira`.
Primary issue tracker for Apache Maven.

Apache Confluence::
REST API at `cwiki.apache.org`.
Primary wiki for Apache Maven documentation.

== Communication

=== MCP Protocol

All MCP servers communicate with Claude Code using the Model Context Protocol (MCP).
This protocol enables:

* Tool discovery and invocation
* Resource access
* Bidirectional communication

=== REST APIs

MCP servers communicate with their respective backend services via REST APIs:

GitHub API:: `api.github.com` - requires authentication token
Apache Jira:: `issues.apache.org/jira` - requires authentication
Apache Confluence:: `cwiki.apache.org` - requires authentication

== Prerequisites

See xref:prerequisites.adoc[Prerequisites] for detailed requirements per component.

== Configuration

Configuration details for each MCP are provided in their respective documentation:

* xref:mail-mcp::index.adoc[mail-mcp configuration]
* xref:components:github-mcp.adoc[GitHub MCP configuration]
* xref:components:atlassian-mcps.adoc[Atlassian MCP configuration]
* xref:components:maven-tools-mcp.adoc[Maven Tools MCP configuration]

== Related

* xref:usage:index.adoc[Usage Documentation Catalog]
* xref:components:index.adoc[Components Catalog]
* xref:development:adr/0003-usage-documentation.adoc[ADR-0003: Usage Documentation]